<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="trames NMEA>
    <meta name=" keywords" content="HTML5, CSS3">
    <meta name="author" content="Eric Galand">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>trame NMEA </title>
    <link rel="stylesheet" media="screen" href="../../style_monsite.css">
    <link href="../../prism.css" rel="stylesheet" />
</head>

<body>
    <div class="container">
        <div class="row">

            <div class="col-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="../../index_site.html">Accueil</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mr-auto">


                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    SNT
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <a class="dropdown-item" href="../accueil_internet.html">Internet</a>
                                    <a class="dropdown-item" href="../accueil_web.html">Web</a>
                                    <a class="dropdown-item" href="../accueil_donnees.html">Les données structurées et
                                        leur traitement</a>
                                    <a class="dropdown-item" href="../accueil_image.html">La photographie numérique</a>
                                    <a class="dropdown-item" href="../accueil_gps.html">Localisation, cartographie et
                                        mobilité</a>
                                    <a class="dropdown-item" href="../accueil_iot.html">Informatique embarquée</a>
                                    <a class="dropdown-item" href="../accueil_reseaux.html">Réseaux sociaux</a>
                                    <a class="dropdown-item" href="../accueil_python.html">Python</a>

                                </div>

                            </li>

                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    NSI
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <a class="dropdown-item" href="#"></a>
                                    <a class="dropdown-item" href="../../NSI/premiereNSI.html">Cours Première</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" href="../../NSI/terminaleSNI.html">Cours Terminale</a>
                                </div>

                            </li>

                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Physique
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <a class="dropdown-item" href="#">Action</a>
                                    <a class="dropdown-item" href="#">Another action</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" href="#">Something else here</a>
                                </div>

                            </li>

                        </ul>

                    </div>
                </nav>

            </div>
        </div>






        <div class="row">
            <div class="col-12">
                <h1>Transmission des coordonnées : trames NMEA
                </h1>

                <h2>Préambule</h2>

                <p>Les différents composants d’un appareil électronique (ex : un téléphone
                    mobile)communiquent par des protocoles normalisés.
                    Ainsi, les puces GPS qui effectuent les calculs de positionnement envoient
                    leurs résultats présentés suivant une trame normalisée : la trame NMEA
                    0183. Le développeur d’une application (par exemple : la galerie photo, un
                    jeu de capture de Pokémons...) souhaitant utiliser la position de l’utilisateur
                    sait qu’il pourra exploiter cette trame pour en déduire les renseignements
                    sur la position.
                </p>

                <img src="img/gps_iphone.png">


                <h2>Activité</h2>
                <h3>Travail préparatoire</h3>

                <table>
                    <tr>
                        <td> 
                            <p>Android : NMEA Tools ou GPS Nmea Lite</p>
                             <p>   iOS : NMEA Gps  </p>
                            
                             <p>Ces applications permettent d’afficher les trames NMEA que génère la
                            puce GPS du téléphone. On voit ainsi que les trames sont d’abord incom-
                            plètes (elles ne contiennent pas les coordonnées), puis deviennent complètes
                            dès que les signaux de 4 satellites ont été analysés.</p>
                        </td>

                        <td><img src="img/capture_NMEATools.png" class="img-fluid" alt="NMEA Tools"></td>
                    <td></td>
                    </tr>

                </table>

                <h3>Documents</h3>

                <p>Tous les smartphones commercialisés ces dernières années sont dotés d’une puce GPS et c’est grâce à
                    celle-
                    ci que votre téléphone peut être géolocalisé, c’est-à-dire que vous pouvez connaître sa position
                    géographique.

                    Localisation, cartographie et mobilité

                    L’objectif de cette activité est d’appréhender le fonctionnement de ce dispositif.
                </p>

            <b>Documents 1 :</b> la norme NMEA 0183 C
             
             <p>   Il existe plus d’une trentaine de trames GPS différentes. Le type d’équipement est défini par les
                    deux  caractères qui suivent le $.Par exemple : </p>
                    
                    <p><b>$GPGGA,064036.289,4836.5375,N,00740.9373,E,1,04,3.2,200.2,M„„0000*0E </b> est
                    une trame GPS de type GGA.
                    Les deux premiers caractères après le signe $ (talker id) identifient l’origine du signal. Les
                    principaux
                    préfixes sont :
                <ul>
                    <li>BD ou GB - Beidou ;</li>
                    <li>GA - Galileo ;</li>
                    <li>GP - GPS ;</li>
                    <li>GL - GLONASS.</li>
                </ul>
               </p>
                <b>Documents 2 : la trame GGA</b>
                <p>La trame GGA est très courante car elle fait partie de celles qui sont utilisées pour connaître la
                    position courante du récepteur GPS. Dans l’exemple suivant :</p>

                    <b>$GPGGA,064036.289,4836.5375,N,00740.9373,E,1,04,3.2,200.2,M„„0000*0E</b>
                   
                  <p> Nous disposons de :
                <ul>
                    <li> $GPGGA : Type de trame ;</li>
                    <li> 064036.289 : Trame envoyée à 06h 40m 36,289s (heure UTC) ;</li>
                    <li> 4836.5375, N : Latitude Nord : 48°36.5375’ (DM) = 48,608958° (DD) = 48°36’32.25" (DMS) ;</li>
                    <li> 00740.9373,E : Longitude Est : 7°40.9373’(DM)= 7,682288° (DD) = 7°40’56.238" (DMS) ;</li>
                    <li> 1 : Type de positionnement (le 1 est un positionnement GPS) ;</li>
                    <li> 04 : Nombre de satellites utilisés pour calculer les coordonnées ;</li>
                    <li> 3.2 : Précision horizontale ou HDOP (Horizontal dilution of precision)</li>
                    <li> 200.2,M : Altitude 200,2, en mètres ;</li>
                    <li> „ „ ,0000 : D’autres informations peuvent être inscrites dans ces champs</li>
                    <li> *0E : Somme de contrôle de parité, un simple XOR sur les caractères entre $ et *3</li>
                </ul></p>
                <p>Source : d’après <a href="https://fr.wikipedia.org/wiki/NMEA_0183">https://fr.wikipedia.org/wiki/NMEA_0183</a>
                </p>

                <b>Document 3 : les notations DMS, DM et DD</b>
                <p>Les coordonnées géographiques sont traditionnellement exprimées dans le système sexagésimal, parfois
                noté « DMS » : degrés ( ° ) minutes (') secondes ("). L’unité de base est le degré d’angle (1 tour complet
                = 360°), puis la minute d’angle (1° = 60'), puis la seconde d’angle (1° = 3 600"). 
                Les sites de cartographie en ligne utilisent les DD dans leurs urls :</p>

                    <img src="img/log_notations.png" class="img-fluid" alt="logiciels cartographie" width="400px"> 

                <p>
                    <p>                Source : d’après <a href="https://fr.wikipedia.org/wiki/Coordonnéesgéographiques">https://fr.wikipedia.org/wiki/Coordonnéesgéographiques</a>
                </p>
                <h3>Questions</h3>
                <p>Vous rendrez un document texte sur lequel figurera toutes les réponses aux questions suivantes.</p>
                <ol>
                   <li> Vérifier par un calcul que la latitude 48°36.5375’ (DM) du document correspond à 48°36’32.25" (DMS).</li>
                    <li> Rechercher sur internet, la définition de l’heure UTC. Quelle est la différence (en heure)
                        entre l’heure
                        que nous voyons sur nos montre et l’heure UTC.</li>
                    <li> On donne la trame NMEA suivante, obtenue à partir d’un enregistrement sur un téléphone mobile
                        avec
                        l’application NMEA tool.</li>
                   <b> $GNGGA,123730.00,4850.632151,N,00221.472929,E,1,12,0.9,24.0,M</b>
                    <ol type="a">
                        <li> A quelle heure UTC ce relevé a-t-il été effectué ?</li>
                        <li> Combien de satellites ont été utilisés pour cette mesure ?</li>
                        <li> Déduire les coordonnées géographiques, en degré décimaux, de la trame enregistrée.</li>
                        <li> Vérifier la position sur le site <a
                                href="https://www.geoportail.gouv.fr/">https://www.geoportail.gouv.fr/</a>. Où ce relevé
                            a-t-il été effectué ?</li>
                    </ol>
                    <li> Grâce à l’application NMEA tools (Enregistreur) ou sur le site <a
                            href="https://nmeagen.org/">https://nmeagen.org/</a>, à l’endroit que
                        vous désirez, lire la trame NMEA GGA générée. Pour plus d'information concernant le site NMEAgen.org, veuillez consulter  <a href="trameNMEA_NMEAgen.pdf">lien</a>)</li>
                    <ol type="a">
                        <li>Écrire la trame lue ;</li>
                        <li> En déduire l’heure,la longitude et la latitude (DM).</li>
                        <li>Convertir ces deux dernières données en degré décimaux.</li>
                        <li> Grâce à python et à la bibliothèque folium, générer une carte. La mettre dans le
                            compte-rendu. </li>
                    </ol>
                </ol>
                <b>Rappel :</b> pour obtenir une carte à partir de coordonnées géographiques (latitude_DD et longitude_DD),
                vous pouvez taper les lignes suivantes sur votre éditeur Python (Edupython ou Thonny , évidemment après
                avoir installé folium). Vous pouvez également adapter le zoom. pour plus de précision, voir TP
                précédent.
                <pre><code class="language-python">
import folium
maCarte= folium.Map(location=[latitude_DD,longitude_DD],zoom_start=15)
maCarte.save('Carte.html')  
</code></pre>
            </div>
        </div>
        <!-- MathJax -->
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
        <script src="../../prism.js"></script>
    </div>
</body>

</html>